---
# Talos Image Factory schematic â€” defines the installer image at factory.talos.dev.
# The schematic ID derived from this file is used in talosImageURL in talconfig.yaml.
# Kernel args and extensions here are baked into the installer image at build time.
customization:
  extraKernelArgs:
    - -init_on_alloc                      # Less security, faster puter
    - -init_on_free                       # Less security, faster puter
    - -selinux                            # Less security, faster puter
    - apparmor=0                          # Less security, faster puter
    - init_on_alloc=0                     # Less security, faster puter
    - init_on_free=0                      # Less security, faster puter
    - mitigations=off                     # Less security, faster puter
    - intel_iommu=on                      # PCI Passthrough
    - iommu=pt                            # PCI Passthrough
    - net.ifnames=0                       # persistent interface names
    - security=none                       # Less security, faster puter
    - talos.auditd.disabled=1             # Less security, faster puter
  systemExtensions:
      officialExtensions:
        - siderolabs/gasket-driver
        - siderolabs/i915
        - siderolabs/intel-ucode
        - siderolabs/nut-client
        - siderolabs/thunderbolt
